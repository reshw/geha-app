# ë¼ìš´ì§€ ì˜ˆì•½ ì‹œìŠ¤í…œ - ê¸°ìˆ  í˜„í™©

## ğŸ“‹ ëª©ì°¨

- [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
- [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
- [ì•„í‚¤í…ì²˜](#ì•„í‚¤í…ì²˜)
- [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
- [ë°ì´í„° êµ¬ì¡°](#ë°ì´í„°-êµ¬ì¡°)
- [í™•ì¥ ê³„íš](#í™•ì¥-ê³„íš)
- [ê´€ë ¨ ë¬¸ì„œ](#ê´€ë ¨-ë¬¸ì„œ)

---

## í”„ë¡œì íŠ¸ ê°œìš”

**loungeap (ë¼ìš´ì§€ ì˜ˆì•½ ì‹œìŠ¤í…œ)**

ìŠ¤í‚¤ì¥ ì‹œì¦Œê¶Œ ê³µìœ  ê´€ë¦¬ë¥¼ ìœ„í•œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ, 1,500ëª… ê·œëª¨ì˜ ì»¤ë®¤ë‹ˆí‹°ë¥¼ ìœ„í•œ í†µí•© í”Œë«í¼ì…ë‹ˆë‹¤.

### ìŠ¬ë¡œê±´
> "ë³´ë”ì— ì˜í•œ, ë³´ë”ë¥¼ ìœ„í•œ ìŠ¤ë…¸ìš° ë¬¸í™” ì§€ì› ì•±"

### í•µì‹¬ ëª©í‘œ
- ì‹œì¦Œë°© ê´€ë¦¬ íš¨ìœ¨í™”
- ì¹´í†¡ë°©ì˜ í˜¼ë€(í…ìŠ¤íŠ¸ ë„ë°°, ì •ë³´ íœ˜ë°œ, ë…¸ì‡¼ ë¶ˆì•ˆ) í•´ê²°
- ì‹ ë¢° ê¸°ë°˜ ì»¤ë®¤ë‹ˆí‹° ìš´ì˜

---

## ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **React 18** - UI ë¼ì´ë¸ŒëŸ¬ë¦¬
- **Vite** - ë¹Œë“œ ë„êµ¬
- **React Router v6** - ë¼ìš°íŒ…
- **Zustand** - ì „ì—­ ìƒíƒœ ê´€ë¦¬
- **Tailwind CSS** - ìŠ¤íƒ€ì¼ë§
- **Lucide React** - ì•„ì´ì½˜

### Backend
- **Firebase**
  - Firestore - NoSQL ë°ì´í„°ë² ì´ìŠ¤
  - Authentication - ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸
  - Storage - íŒŒì¼ ì €ì¥
  - Hosting - ë°°í¬

### ì™¸ë¶€ ì„œë¹„ìŠ¤
- **Kakao API** - ì†Œì…œ ë¡œê·¸ì¸
- **NHN Cloud** - ì•Œë¦¼í†¡ ë°œì†¡ (Netlify Functions)

---

## ì•„í‚¤í…ì²˜

### ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ auth/              # ì¸ì¦ (KakaoLogin, SignUp, Join)
â”‚   â”œâ”€â”€ calendar/          # ìº˜ë¦°ë” (MonthlyCalendarView, WeeklyCalendarView)
â”‚   â”œâ”€â”€ common/            # ê³µí†µ (GlobalHeader, Modal, UserTypeBadge)
â”‚   â”œâ”€â”€ reservations/      # ì˜ˆì•½ (ReservationModal, WeeklyList)
â”‚   â”œâ”€â”€ settlement/        # ì •ì‚°
â”‚   â”œâ”€â”€ praise/            # ì¹­ì°¬
â”‚   â”œâ”€â”€ expense/           # ìš´ì˜ë¹„
â”‚   â”œâ”€â”€ space/             # ìŠ¤í˜ì´ìŠ¤ (SpaceDropdown, CreateSpaceModal)
â”‚   â””â”€â”€ bartender/         # ë°”í…ë” (ë©”ë‰´íŒ)
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useAuth.js         # ì¸ì¦ ìƒíƒœ ê´€ë¦¬
â”‚   â”œâ”€â”€ useReservations.js # ì˜ˆì•½ ë°ì´í„° fetching
â”‚   â”œâ”€â”€ useMonthlyReservations.js # ì›”ê°„ ìº˜ë¦°ë”ìš©
â”‚   â””â”€â”€ useSeasonOut.js    # ì‹œì¦Œì•„ì›ƒ ê´€ë¦¬
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ authService.js     # ì¹´ì¹´ì˜¤ ì¸ì¦ + ì‚¬ìš©ì ê´€ë¦¬
â”‚   â”œâ”€â”€ reservationService.js # ì˜ˆì•½ CRUD + dailyStats
â”‚   â”œâ”€â”€ spaceService.js    # ìŠ¤í˜ì´ìŠ¤ ê´€ë¦¬
â”‚   â”œâ”€â”€ settlementService.js # ì •ì‚° (ISO 8601 ì£¼ì°¨)
â”‚   â”œâ”€â”€ expenseService.js  # ìš´ì˜ë¹„/ì…ê¸ˆ ê´€ë¦¬
â”‚   â”œâ”€â”€ mealGatheringService.js # ì‹ì‚¬ ëª¨ì„
â”‚   â”œâ”€â”€ seasonOutService.js # ì‹œì¦Œì•„ì›ƒ
â”‚   â”œâ”€â”€ praiseService.js   # ì¹­ì°¬ ì‹œìŠ¤í…œ
â”‚   â””â”€â”€ notificationService.js # ì•Œë¦¼í†¡/ì´ë©”ì¼
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ constants.js       # ìƒìˆ˜ ì •ì˜
â”‚   â”œâ”€â”€ dateUtils.js       # ë‚ ì§œ ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ permissions.js     # ê¶Œí•œ ì²´í¬
â”‚   â””â”€â”€ features.js        # ê¸°ëŠ¥ í”ŒëŸ¬ê·¸ì¸ ì •ì˜
â”œâ”€â”€ store/
â”‚   â””â”€â”€ useStore.js        # Zustand ì „ì—­ ìƒíƒœ
â”œâ”€â”€ config/
â”‚   â””â”€â”€ firebase.js        # Firebase ì´ˆê¸°í™”
â””â”€â”€ pages/
    â”œâ”€â”€ WeeklyList.jsx (ë©”ì¸)
    â”œâ”€â”€ SettlementPage.jsx
    â”œâ”€â”€ PraisePage.jsx
    â”œâ”€â”€ ExpenseListPage.jsx
    â””â”€â”€ ...
```

### ë°ì´í„° íë¦„

```
User Action
    â†“
Component (UI)
    â†“
Hook (useReservations, useAuth)
    â†“
Service Layer (reservationService, authService)
    â†“
Firestore
    â†“
Zustand Store (ìºì‹±)
    â†“
Component Re-render
```

### ë ˆì´ì•„ì›ƒ êµ¬ì¡°

```
MainLayout
â”œâ”€â”€ GlobalHeader (ìŠ¤í˜ì´ìŠ¤ ì„ íƒ, í”„ë¡œí•„ ë©”ë‰´)
â”œâ”€â”€ Outlet (í˜ì´ì§€ ì½˜í…ì¸ )
â””â”€â”€ BottomNav (ë™ì  ê¸°ëŠ¥ ë©”ë‰´)
```

---

## ì£¼ìš” ê¸°ëŠ¥

### 1. ì¸ì¦ ì‹œìŠ¤í…œ
- ì¹´ì¹´ì˜¤ ì†Œì…œ ë¡œê·¸ì¸
- ì‹¤ëª…(displayName) + ì¹´ì¹´ì˜¤ ë‹‰ë„¤ì„ ë¶„ë¦¬ ê´€ë¦¬
- ìŠ¤í˜ì´ìŠ¤ë³„ ì—­í•  ê´€ë¦¬ (manager, vice-manager, shareholder, guest)

### 2. ì˜ˆì•½ ê´€ë¦¬
- ì£¼ê°„/ì›”ê°„ ìº˜ë¦°ë” ë·°
- ì˜ˆì•½ ìƒì„±/ìˆ˜ì •/ì·¨ì†Œ (Soft Delete)
- ë‹¹ì¼ì¹˜ê¸° ì˜ˆì•½ ì§€ì›
- ì˜ˆì•½ ë³€ê²½ ì´ë ¥ ì¶”ì 
- dailyStats ìë™ ì§‘ê³„ (ì„±ë³„/íƒ€ì…ë³„ í†µê³„)
- ë©”ëª¨ ê¸°ëŠ¥

### 3. ì •ì‚° ì‹œìŠ¤í…œ
- ISO 8601 ì£¼ì°¨ ê¸°ì¤€ ì •ì‚°
- ë©¤ë²„ë³„ ì •ì‚° ë‚´ì—­ ê´€ë¦¬
- ì˜ìˆ˜ì¦ ì—…ë¡œë“œ ë° ê´€ë¦¬
- ìë™ ì •ì‚° ë§ˆê° ê¸°ëŠ¥

### 4. ìš´ì˜ë¹„ ê´€ë¦¬
- ì§€ì¶œ/ìˆ˜ì… ì´ì› ê´€ë¦¬
- ê²ŒìŠ¤íŠ¸ ìë™ ì…ê¸ˆ ìƒì„±
- ìŠ¹ì¸/ë°˜ë ¤ ì›Œí¬í”Œë¡œìš°
- ì˜ˆì•½ê³¼ ì…ê¸ˆ ì—°ë™ (linkedReservationId)

### 5. ì¹­ì°¬ ì‹œìŠ¤í…œ
- ë©¤ë²„ ê°„ ì¹­ì°¬ ì£¼ê³ ë°›ê¸°
- ì›”ê°„/ì—°ê°„ í†µê³„
- ì¹­ì°¬ ë¦¬í¬í„° ì„ ì •

### 6. ì‹œì¦Œì•„ì›ƒ
- ë©¤ë²„ë³„ ì§ ë¹¼ëŠ” ë‚ ì§œ ë“±ë¡
- ëŒ€ì²­ì†Œ ë‚  ê²°ì • (ë°©ì¥ ì „ìš©)
- ì „ì²´ ê³µìœ  ê¸°ëŠ¥

### 7. ì‹ì‚¬ ëª¨ì„
- ë‚ ì§œ/ì‹œê°„ë³„ ì‹ì‚¬ ëª¨ì„ ìƒì„±
- ì°¸ì—¬ì ê´€ë¦¬ (arrayUnion/arrayRemove)

### 8. ë°”í…ë” (ë©”ë‰´íŒ)
- ë©”ë‰´ ê´€ë¦¬
- ì£¼ë¬¸ ì‹œìŠ¤í…œ

### 9. ë™ì  ê¸°ëŠ¥ í”ŒëŸ¬ê·¸ì¸
- ìŠ¤í˜ì´ìŠ¤ë³„ ê¸°ëŠ¥ í™œì„±í™”/ë¹„í™œì„±í™”
- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë™ì  êµ¬ì„± (ìµœëŒ€ 4ê°œ)

---

## ë°ì´í„° êµ¬ì¡°

### Firestore ì»¬ë ‰ì…˜

```
/users/{userId}
  â”œâ”€â”€ displayName, email, profileImage
  â””â”€â”€ /spaceAccess/{spaceId}
      â”œâ”€â”€ userType, status, order
      â””â”€â”€ joinedAt, leftAt, rejoinedAt

/spaces/{spaceId}
  â”œâ”€â”€ name, accountBank, accountNumber
  â”œâ”€â”€ /assignedUsers/{userId}
  â”œâ”€â”€ /reserves/{reserveId}
  â”‚   â”œâ”€â”€ userId, name, checkIn, checkOut
  â”‚   â”œâ”€â”€ status: 'active' | 'canceled'
  â”‚   â””â”€â”€ /history/{historyId}
  â”œâ”€â”€ /dailyStats/{dateStr}
  â”‚   â”œâ”€â”€ totalCount, maleCount, femaleCount
  â”‚   â””â”€â”€ guestCount, memberCount
  â”œâ”€â”€ /settlement/{weekId}
  â”œâ”€â”€ /Expense/{expenseId}
  â”œâ”€â”€ /mealGatherings/{gatheringId}
  â”œâ”€â”€ /seasonOuts/{userId}
  â”œâ”€â”€ /settings/{settingId}
  â””â”€â”€ /guestPolicies/{policyId}

/admin_requests/{requestId}
/tours/{tourId}
```

### ì–‘ë°©í–¥ ë°ì´í„° ê´€ë¦¬

**ìŠ¤í˜ì´ìŠ¤ ê°€ì…:**
1. `users/{userId}/spaceAccess/{spaceId}` - ì‚¬ìš©ì ê´€ì 
2. `spaces/{spaceId}/assignedUsers/{userId}` - ìŠ¤í˜ì´ìŠ¤ ê´€ì 

**ì¥ì :**
- ë¹ ë¥¸ ì¡°íšŒ (ê° ê´€ì ì—ì„œ ìµœì í™”)
- ë°ì´í„° ì¼ê´€ì„± ìœ ì§€

---

## ì„±ëŠ¥ ìµœì í™”

### 1. Zustand ìºì‹±
- **calendarCache**: ì›”ê°„ ìº˜ë¦°ë” ë°ì´í„° (30ì´ˆ TTL)
- **tierConfigs**: ì»¤ìŠ¤í…€ ë“±ê¸‰ ì„¤ì •
- **profiles**: ì‚¬ìš©ì í”„ë¡œí•„ ì •ë³´

### 2. Firestore ì¿¼ë¦¬ ìµœì í™”
- ë³µí•© ì¸ë±ìŠ¤ í™œìš©
- ë‚ ì§œ ë²”ìœ„ ì¿¼ë¦¬ ìµœì í™”
- dailyStats ì§‘ê³„ë¡œ ë¶ˆí•„ìš”í•œ ì½ê¸° ì œê±°

### 3. ë³‘ë ¬ ë¡œë”©
- Promise.allì„ í™œìš©í•œ ë³‘ë ¬ ë°ì´í„° fetching
- 3ì£¼ì¹˜ ì˜ˆì•½ ë°ì´í„° ë™ì‹œ ë¡œë“œ

---

## í™•ì¥ ê³„íš

### ìŠˆí¼ì•± ì „í™˜

loungeapì„ ë‹¨ì¼ ê¸°ëŠ¥ ì•±ì—ì„œ **ë©€í‹°ì•± ìŠˆí¼ì•±**ìœ¼ë¡œ í™•ì¥ ì¤‘ì…ë‹ˆë‹¤.

**Phase 1: ì¹´í’€ ì‹œìŠ¤í…œ ì¶”ê°€**
- ì•± ì „í™˜ ë©”ë‰´ (ì‹œì¦Œë°© â†” ì¹´í’€)
- ìŠ¤í‚¤ì¥ë³„ ì¹´í’€ ë§¤ì¹­
- ì¹´í’€ ì œê³µ/ìš”ì²­ ë“±ë¡ ë° í•„í„°ë§
- ì¹´ì¹´ì˜¤í†¡ ì˜¤í”ˆí”„ë¡œí•„ ì—°ë™
- geha í‰íŒ ì‹œìŠ¤í…œ í™œìš©

**Phase 2: ì¶”ê°€ ê¸°ëŠ¥ (í–¥í›„)**
- ì¥ë¹„ ê´€ë¦¬ ì•±
- ì¤‘ê³  ê±°ë˜ ì•±
- ë ˆìŠ¨ ë§¤ì¹­ ì•±

**ìƒì„¸ ê³„íš ë¬¸ì„œ:** â†’ [ì¹´í’€ ì‹œìŠ¤í…œ êµ¬í˜„ ê³„íš](./2026-02-21-carpool-system-plan.md)

---

## ê´€ë ¨ ë¬¸ì„œ

### ê¸°ëŠ¥ë³„ ìƒì„¸ ë¬¸ì„œ
- [ì¹´í’€ ì‹œìŠ¤í…œ êµ¬í˜„ ê³„íš](./2026-02-21-carpool-system-plan.md) â­ NEW
- [ì •ì‚° ìë™ ë§ˆê° ì„¤ì •](./SETTLEMENT_AUTO_CLOSE_SETUP.md)
- [ì •ì‚° í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ](./SETTLEMENT_TESTING.md)
- [UI ê°œì„  ë¡œê·¸](./UI_IMPROVEMENTS_LOG.md)

### ê°œë°œ íˆìŠ¤í† ë¦¬
- [2026-02-11 ê¸€ë¡œë²Œ ìŠ¤í˜ì´ìŠ¤ ì„ íƒê¸°](./2026-02-11-0006-global-space-selector.md)
- [2026-02-10 ì¹­ì°¬ ë¦¬í¬í„° í†µê³„](./2026-02-10-2320-praise-reporter-stats.md)
- [2026-02-10 ì˜ˆì•½ í†µê³„ ìˆ˜ì •](./2026-02-10-2125-reservation-stats-fix.md)

---

## ë³´ì•ˆ

### Firestore Rules
- ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC)
- Soft Delete ê°•ì œ (ì‹¤ì œ ì‚­ì œ ê¸ˆì§€)
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê²€ì¦ (ì˜ˆ: ì§„í–‰ ì¤‘ ì˜ˆì•½ ì‹œì‘ì¼ ë³€ê²½ ë¶ˆê°€)

### ì¸ì¦
- Firebase Authentication
- ì¹´ì¹´ì˜¤ OAuth 2.0

---

## ë°°í¬

- **í˜¸ìŠ¤íŒ…**: Firebase Hosting
- **í•¨ìˆ˜**: Netlify Functions (ì•Œë¦¼í†¡)
- **ë¹Œë“œ**: Vite (npm run build)

---

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2026-02-21
**ë¬¸ì„œ ê´€ë¦¬ì**: Claude Code
